# 4부: 컴포넌트 원칙

## 12장: 컴포넌트

### 컴포넌트의 의미

    1. 시스템의 구성요소로 배포할 수 있는 가장 작은 단위
    2. 잘 설계된 컴포넌트라면 독립적으로 개발, 배포 가능하여야 한다

### 컴포넌트의 역사

    1. 과거의 개발자들은 프로그램이 실행될 메모리 주소를 직접 제어함
    2. 메모리 주소를 한번 결정하면 변경이 불가능함
    3. 시간이 지나면서 어플리케이션의 크기가 커지고 할당된 메모리주소를 넘어서기 시작함
    
### 재배치성

    1. 위 문제의 해결책은 바이너리를 재배치 가능하도록 하는것
    2. 링킹 로더의 탄생으로 개발자들은 필요한 함수들만 불러올 수 있게 됨

### 링커

    1. 시간이 지나면서 프로그램의 크기가 커지자 링킹 로더가 느려지기 시작했고 해결책으로 링커와 로더가 분리됨
    2. 1980년대 부터 하드웨어의 발전을 통해 해당 문제들이 개선되기 시작하였고 컴포넌트 플러그인 아키텍처가 탄생함

## 13장: 컴포넌트 응집도

### REP: 재사용/릴리스 등가 원칙

재사용 단위는 릴리스 단위와 같다

    1. 단일 컴포넌트는 응집성 높은 클래스와 모듈들로 구성되어야 함
    2. 컴포넌트를 구성하는 모듈들은 서로 공유하는 중요한 테마나 목적이 있어야 함
    
### CCP: 공통 폐쇄 원칙

단일 컴포넌트는 변경의 이유가 여러개여서는 안된다.
동일한 시점에 동일한 이유로 변경되는 것들은 한데 묶어라.
서로 다른 시점에 다른 이유로 변경되는 것들은 서로 분리하라.
이미지

    1. 발생 가능성이 있거나 과거에 발생했던 대다수의 공통적 변경에 대해 클래스가 닫혀있도록 설계해야 한다
    2. 동일한 유형의 변경에 닫혀있는 클래스들을 하나의 컴포넌트로 묶는다면 변경이 필요한 요구사항이 발생했을 때 영향을 주는 컴포넌트가 최소한으로 한정될 가능성이 높음
    
### CRP: 공통 재사용 원칙

필요하지 않은 않것에 의존하지 마라

    1. 같이 재사용되는 경향이 있는 클래스와 모듈은 같은 컴포넌트에 포함해야 한다
    2. 강하게 결합되지 않은 클래스들을 동일한 컴포넌트에 위치시켜서는 안된다
    
### 컴포넌트 응집도에 대한 균형 다이어그램

    1. 세 원칙은 서로 상충되며 REP와 CCP는 포함 원칙으로 컴포넌트를 더욱 크게 만들고 CRP는 배재 원칙으로 컴포넌트를 더욱 작게 만든다.
![image](https://user-images.githubusercontent.com/52348220/218303034-481fbf58-7a90-4b69-8448-85a962dd9fc8.png)

    1. REP와 CRP에만 중점을 두면 사소한 변경에도 너무 많은 컴포넌트가 영향을 받는다
    2. CCP와 REP에만 집중하면 불필요한 릴리스가 너무 빈번해 진다
    3. 따라서 균형 삼각형에서 필요한 부분을 충족 시키는 위치는 찾는것이 중요하다

## 14장: 컴포넌트 결합

### ADP: 의존성 비순환 원칙

컴포넌트의 의존성 그래프에 순환이 있어서는 안된다.
이미지

    1. 의존성 구조에 순환이 있다면 숙취 증후군을 피해갈 수 없다.
    2. 순환 의존성이 발생하면 릴리스 하기 훨씬 어려워진다.

**순환 끊기**
  
    1. 의존성 역전 원칙을 적용한다.
    2. 의존성 순환을 야기하는 클래스들을 새로운 컴포넌트로 이동시킨다.
    3. 컴포넌트 의존성 구조는 시스템의 설계에 발맞춰 성장 및 진화해야 한다.
    
### SDP: 안정된 의존성 원칙

설계를 유지하다 보면 변경은 불가피하다

    1. 변경이 쉽지 않은 컴포넌트가 변동이 예상되는 컴포넌트에 의존하게 만들어서는 안된다
    
**안정성 지표**

    컴포넌트로 들어오고 나가는 의존성의 개수를 세어보는 방법을 통해 컴포넌트가 위치상 어느정도의 안정성을 가지는지 계산할 수 있음

**모든 컴포넌트가 안정적이어야 하는것은 아니다**

    컴포넌트 구조를 설계할 때 기대하는 것은 불안정한 컴포넌트와 안정된 컴포넌트가 모두 존재하는 상태이다
    안정적인 컴포넌트에 불안정한 컴포넌트가 의존하는것이 가장 이상적인 구조이다.
        
**추상 컴포넌트**

    인터페이스만을 포함하는 컴포넌트는 매우 안정적이기 때문에 덜 안정적인 컴포넌트가 의존할 수 있는 이상적인 대상이 될 수 있다.
    
### SAP: 안정된 추상화 원칙

컴포넌트는 안정된 정도만큼만 추상화 되어 있어야 한다

    1. 안정된 컴포넌트는 추상 컴포넌트여야 하며 안정성이 컴포넌트를 확장하는 일을 방해해서는 안된다.
    2. 불안정한 컴포넌트는 반드시 구체 컴포넌트여야 한다.
    
**추상화 정도 측정하기**

    추상화 정도 = (컴포넌트의 추상 클래스와 인터페이스 개수) % (컴포넌트의 클래스 개수)

**주계열**

 이미지   

    안정성(I)와 추상화 정도(A) 사이의 관계를 나타낼 때에는 수직축에 A, 수평축에 I를 나타내는 그래프로 표시한다
 
**고통의 구역**    

    (0.0) 주변에 위치한 컴포넌트의 경우 추상적이지 않기 때문에 확장할 수 없고 안정적이기 때문에 변경도 어렵기 때문에 바람직 하지 않다.
    변동성이 거의 없는 컴포넌트(String 등)의 경우에는 해당 구역에 있더라도 변동될 가능성이 거의 없기 때문에 해롭지 않다.
    따라서 해당 구역에 존재하면 안되는 컴포넌트는 변동성이 있는 소프트웨어 컴포넌트 이다.
    
**쓸모없는 구역**

    (1.1) 주변은 가장 추상적이지만 어떤것도 해당 컴포넌트에 의존하지 않기 때문에 쓸모없다.
    해당 구역에 있는 소프트웨어는 대표적으로 누구도 구현하지 않은 채 남겨진 추상 클래스가 대부분이다.
    
    
********배제   구역 벗어나기
